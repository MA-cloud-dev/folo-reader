# Folo æç®€é˜…è¯»å™¨ - æŠ€æœ¯è§„èŒƒ

## æŠ€æœ¯æ ˆ

| å±‚é¢ | æŠ€æœ¯é€‰å‹ |
|------|----------|
| æ¡†æ¶ | React 18 + TypeScript |
| æ„å»º | Vite |
| æ ·å¼ | TailwindCSS |
| çŠ¶æ€ | Zustand |
| å­˜å‚¨ | IndexedDB (Dexie.js) |
| AI | SiliconFlow APIï¼ˆç”¨æˆ·å¯é…ç½®ï¼‰ |
| å›¾æ ‡ | lucide-react |
| å·¥å…· | clsxï¼ˆç±»åå·¥å…·ï¼‰ |

---

## æ ¸å¿ƒé—®é¢˜è§£ç­”

### é—®é¢˜ä¸€ï¼šä¿¡æ¯ç­›é€‰å¦‚ä½•è¿›è¡Œï¼Ÿ

> **æ ¸å¿ƒç†å¿µ**ï¼šAI æç‚¼ä¼˜å…ˆï¼ŒæŒ‰éœ€æŸ¥çœ‹åŸæ–‡

#### 1. é˜…è¯»æµç¨‹è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åˆ·æ–°è®¢é˜…æº                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è·å– RSS â†’ æå–å…ƒæ•°æ® â†’ è°ƒç”¨ AI ç”Ÿæˆæ‘˜è¦ â†’ å­˜å‚¨æ‘˜è¦        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å±•ç¤º AI æ‘˜è¦å¡ç‰‡æµï¼ˆé»˜è®¤è§†å›¾ï¼‰                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ“° æ–‡ç« æ ‡é¢˜                              2å°æ—¶å‰   â”‚   â”‚
â”‚  â”‚  AI: è¿™ç¯‡æ–‡ç« ä¸»è¦è®²è¿°äº†xxxï¼Œæ ¸å¿ƒè§‚ç‚¹æ˜¯...          â”‚   â”‚
â”‚  â”‚  [å±•å¼€åŸæ–‡] [æ”¶è—] [æ ‡è®°å·²è¯»]                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â–¼ (ç”¨æˆ·ç‚¹å‡»"å±•å¼€åŸæ–‡")
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å®æ—¶è·å–åŸæ–‡ â†’ æ¸²æŸ“å®Œæ•´å†…å®¹                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. å­˜å‚¨ç­–ç•¥

| å†…å®¹ | å­˜å‚¨ | è¯´æ˜ |
|------|------|------|
| è®¢é˜…æºä¿¡æ¯ | âœ… IndexedDB | URLã€åç§°ã€åˆ†ç±»ã€AIç­›é€‰è§„åˆ™ |
| æ–‡ç« å…ƒæ•°æ® | âœ… IndexedDB | æ ‡é¢˜ã€é“¾æ¥ã€æ—¶é—´ã€é˜…è¯»çŠ¶æ€ |
| AI æ‘˜è¦ | âœ… IndexedDB | ç¼“å­˜é¿å…é‡å¤è°ƒç”¨ |
| æ–‡ç« åŸæ–‡ | âŒ ä¸å­˜å‚¨ | ç‚¹å‡»æ—¶å®æ—¶è·å– |
| æ”¶è—åŸæ–‡ | âœ… IndexedDB | ç”¨æˆ·ä¸»åŠ¨æ”¶è—æ‰ä¿å­˜ |
| AI ç­›é€‰è§„åˆ™ | âœ… IndexedDB | æ¯ä¸ªè®¢é˜…æºå¯é…ç½®ç­›é€‰è§„åˆ™ |

#### 3. RSS è·å–

```typescript
// ä½¿ç”¨åŸç”Ÿ DOMParser è§£æ RSSï¼ˆé¿å… Node.js ä¾èµ–ï¼‰
const CORS_PROXIES = [
    'https://api.allorigins.win/raw?url=',
    'https://corsproxy.io/?',
    'https://api.codetabs.com/v1/proxy?quest=',
]

async function fetchFeed(url: string) {
  // 1. é¦–å…ˆå°è¯•ç›´æ¥è®¿é—®
  // 2. å¤±è´¥åˆ™è½®è¯¢ä½¿ç”¨ CORS ä»£ç†
  const xmlText = await fetchWithProxy(url)
  
  // ä½¿ç”¨ DOMParser è§£æ RSS/Atom
  const parser = new DOMParser()
  const doc = parser.parseFromString(xmlText, 'text/xml')
  
  // æ”¯æŒ RSS 2.0 å’Œ Atom æ ¼å¼
  const feedEl = doc.querySelector('feed') // Atom
  const channelEl = doc.querySelector('channel') // RSS 2.0
  
  return feedEl ? parseAtom(feedEl) : parseRSS2(channelEl)
}
```

#### 4. AI ç­›é€‰åŠŸèƒ½

è®¢é˜…æºæ”¯æŒåŸºäºè‡ªç„¶è¯­è¨€çš„æ™ºèƒ½ç­›é€‰ï¼š

```typescript
interface Feed {
  id: string
  title: string
  url: string
  category?: string
  aiFilter?: string  // AI ç­›é€‰è§„åˆ™ï¼ˆè‡ªç„¶è¯­è¨€æè¿°ï¼‰
}

// ç¤ºä¾‹ï¼šHacker News è®¢é˜…æºé…ç½®
{
  url: 'https://hnrss.org/frontpage',
  title: 'Hacker News',
  category: 'AI å‰æ²¿',
  aiFilter: 'åªä¿ç•™ä¸ AIã€æœºå™¨å­¦ä¹ ã€LLMã€GPTã€æ·±åº¦å­¦ä¹ ç›¸å…³çš„å†…å®¹'
}

// AI æ‰¹é‡ç­›é€‰æ–‡ç« 
async function filterArticlesBatch(
  articles: Array<{ id: string; title: string }>,
  filterRule: string
): Promise<Set<string>> {
  // è°ƒç”¨ AI åˆ¤æ–­æ¯ç¯‡æ–‡ç« æ˜¯å¦ç¬¦åˆè§„åˆ™
  // è¿”å›ä¿ç•™çš„æ–‡ç«  ID é›†åˆ
}
```

---

### é—®é¢˜äºŒï¼šå›½äº§ AI (SiliconFlow) å¦‚ä½•è°ƒç”¨ï¼Ÿ

> **æ ¸å¿ƒä¼˜åŠ¿**ï¼šSiliconFlow å®Œå…¨å…¼å®¹ OpenAI API æ ¼å¼ï¼Œç”¨æˆ·å¯è‡ªå®šä¹‰é…ç½®

#### 1. ç”¨æˆ·è‡ªå®šä¹‰é…ç½®

ç”¨æˆ·å¯åœ¨åº”ç”¨å†…é…ç½® AI æœåŠ¡ï¼š

- **é…ç½®ç•Œé¢**ï¼šåº”ç”¨å†…æä¾› AI è®¾ç½®å¼¹çª—ï¼ˆAISettings ç»„ä»¶ï¼‰
- **é…ç½®é¡¹**ï¼šAPI Base URLã€API Keyã€é»˜è®¤æ¨¡å‹
- **å­˜å‚¨**ï¼šé…ç½®ä¿å­˜åˆ° localStorage
- **ä¼˜å…ˆçº§**ï¼šç”¨æˆ·è®¾ç½® > ç¯å¢ƒå˜é‡ > é»˜è®¤å€¼

```typescript
// é…ç½®ç®¡ç†
const AI_CONFIG_KEY = 'folo_ai_config'

interface AIConfigData {
  baseUrl: string
  apiKey: string
}

// è·å–é…ç½®ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰
function getAIConfig(): AIConfigData {
  // 1. ä» localStorage è¯»å–ç”¨æˆ·è®¾ç½®
  const saved = localStorage.getItem(AI_CONFIG_KEY)
  if (saved) return JSON.parse(saved)
  
  // 2. ä½¿ç”¨ç¯å¢ƒå˜é‡
  return {
    baseUrl: DEFAULT_AI_CONFIG.baseUrl,
    apiKey: import.meta.env.VITE_SILICONFLOW_API_KEY || '',
  }
}
```

#### 2. è°ƒç”¨æ–¹å¼

```typescript
// ä½¿ç”¨ OpenAI SDK
import OpenAI from 'openai'

const client = new OpenAI({
  baseURL: getAIConfig().baseUrl,
  apiKey: getAIConfig().apiKey,
  dangerouslyAllowBrowser: true, // çº¯å‰ç«¯ä½¿ç”¨
})

// ç”Ÿæˆæ‘˜è¦
async function generateSummary(
  content: string,
  model: string = DEFAULT_MODEL
): Promise<string> {
  const response = await client.chat.completions.create({
    model,
    messages: [
      {
        role: 'system',
        content: 'ä½ æ˜¯å†…å®¹æ‘˜è¦åŠ©æ‰‹ã€‚ç”¨150å­—å†…çš„ä¸­æ–‡æ€»ç»“æ ¸å¿ƒè§‚ç‚¹ï¼Œä»¥HTMLæ ¼å¼è¾“å‡ºï¼ˆå¯ç”¨<p>, <strong>, <ul>, <li>æ ‡ç­¾ï¼‰ã€‚'
      },
      {
        role: 'user',
        content: content
      }
    ],
    max_tokens: 500,
  })
  
  return response.choices[0].message.content || ''
}
```

#### 3. å¯ç”¨æ¨¡å‹åˆ—è¡¨

åº”ç”¨æ”¯æŒå¤šä¸ª AI æ¨¡å‹ï¼Œç”¨æˆ·å¯åœ¨å¯¹è¯æ—¶è‡ªç”±åˆ‡æ¢ï¼š

```typescript
export const AI_MODELS = {
    recommended: [
        { id: 'Pro/deepseek-ai/DeepSeek-V3.2', name: 'DeepSeek V3.2ï¼ˆæ¨èï¼‰' },
        { id: 'Pro/Qwen/Qwen2.5-72B-Instruct', name: 'Qwen 2.5 72B' },
    ],
    advanced: [
        { id: 'Qwen/Qwen3-VL-32B-Thinking', name: 'Qwen 3 Thinking' },
        { id: 'Pro/deepseek-ai/DeepSeek-R1', name: 'DeepSeek R1' }
    ]
}

export const DEFAULT_MODEL = 'Pro/deepseek-ai/DeepSeek-V3.2'
```

#### 4. AI å¯¹è¯åŠŸèƒ½

åŸºäºå½“å‰æ–‡ç« å†…å®¹çš„æŒç»­å¯¹è¯ï¼š

```typescript
// æµå¼å¯¹è¯
async function chatWithAIStream(
  userMessage: string,
  history: Array<{ role: 'user' | 'assistant'; content: string }>,
  articleTitle: string,
  articleContent: string,
  onChunk: (chunk: string) => void,
  model: string = DEFAULT_MODEL
): Promise<void> {
  const stream = await client.chat.completions.create({
    model,
    messages: [
      {
        role: 'system',
        content: `ä½ æ­£åœ¨ä¸ç”¨æˆ·è®¨è®ºä»¥ä¸‹æ–‡ç« ï¼š\n\næ ‡é¢˜ï¼š${articleTitle}\n\nå†…å®¹ï¼š${articleContent}\n\nè¯·åŸºäºæ–‡ç« å†…å®¹å›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚`
      },
      ...history,
      { role: 'user', content: userMessage }
    ],
    stream: true,
  })

  for await (const chunk of stream) {
    const content = chunk.choices[0]?.delta?.content || ''
    if (content) onChunk(content)
  }
}
```

#### 5. è´¹ç”¨è€ƒé‡

- SiliconFlow æä¾›å…è´¹é¢åº¦
- è½»é‡ä½¿ç”¨åœºæ™¯æˆæœ¬æä½
- æœ¬åœ°ç¼“å­˜å·²ç”Ÿæˆçš„æ‘˜è¦é¿å…é‡å¤è°ƒç”¨

---

### é—®é¢˜ä¸‰ï¼šå››æ å¸ƒå±€å¦‚ä½•å®ç°ï¼Ÿ

> **æ ¸å¿ƒç†å¿µ**ï¼šçµæ´»å¯è°ƒæ•´çš„å››æ å¸ƒå±€ï¼Œæä¾›æ²‰æµ¸å¼é˜…è¯»ä½“éªŒ

#### 1. å¸ƒå±€è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è®¢é˜…æº   â”‚ æ–‡ç« åˆ—è¡¨     â”‚ é˜…è¯»è¯¦æƒ…        â”‚ AIå¯¹è¯     â”‚
â”‚ Sidebar  â”‚ FeedList    â”‚ ArticleView    â”‚ AIChat     â”‚
â”‚ (å¯è°ƒ)   â”‚ (å¯è°ƒ)       â”‚ (è‡ªé€‚åº”)        â”‚ (å¯è°ƒ)     â”‚
â”‚ 180-360pxâ”‚ 280-480px   â”‚ flex-1         â”‚ 300-500px  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¸ƒå±€ç‰¹ç‚¹**ï¼š
- æ¯ä¸ªé¢æ¿å¯ç‹¬ç«‹å±•å¼€/æ”¶ç¼©
- æ”¯æŒæ‹–æ‹½è°ƒæ•´å®½åº¦ï¼ˆé™¤é˜…è¯»è¯¦æƒ…åŒºï¼‰
- å¸ƒå±€çŠ¶æ€æŒä¹…åŒ–åˆ° localStorage
- æ”¶ç¼©åæ˜¾ç¤ºä¸º 48px å®½çš„å›¾æ ‡æ 

#### 2. ResizablePanel ç»„ä»¶

```typescript
interface ResizablePanelProps {
  width: number
  minWidth: number
  maxWidth: number
  onResize: (width: number) => void
  showHandle?: boolean
  handlePosition?: 'left' | 'right'
  className?: string
  children: React.ReactNode
}

/**
 * å¯è°ƒæ•´å¤§å°çš„é¢æ¿ç»„ä»¶
 * - æ‹–æ‹½æ‰‹æŸ„è°ƒæ•´å®½åº¦
 * - å®½åº¦é™åˆ¶
 * - æ‹–åŠ¨æ—¶é«˜äº®æ˜¾ç¤º
 */
function ResizablePanel({ width, minWidth, maxWidth, onResize, ... }: ResizablePanelProps) {
  const [isResizing, setIsResizing] = useState(false)
  
  const handleMouseDown = () => setIsResizing(true)
  
  const handleMouseMove = (e: MouseEvent) => {
    if (!isResizing) return
    const newWidth = Math.max(minWidth, Math.min(maxWidth, /* è®¡ç®—å®½åº¦ */))
    onResize(newWidth)
  }
  
  return (
    <div style={{ width: `${width}px` }}>
      {children}
      {showHandle && (
        <div 
          onMouseDown={handleMouseDown}
          className="resize-handle"
        />
      )}
    </div>
  )
}
```

#### 3. å¸ƒå±€çŠ¶æ€ç®¡ç†

```typescript
const STORAGE_KEY = 'folo-panel-layout'

// é»˜è®¤å¸ƒå±€é…ç½®
const DEFAULT_LAYOUT = {
  sidebar: { expanded: true, width: 240 },
  feedList: { expanded: true, width: 380 },
  aiChat: { expanded: false, width: 360 },
}

// ä» localStorage æ¢å¤æˆ–ä½¿ç”¨é»˜è®¤å€¼
const [layout, setLayout] = useState(() => {
  try {
    const saved = localStorage.getItem(STORAGE_KEY)
    return saved ? JSON.parse(saved) : DEFAULT_LAYOUT
  } catch {
    return DEFAULT_LAYOUT
  }
})

// æŒä¹…åŒ–å¸ƒå±€
useEffect(() => {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(layout))
}, [layout])
```

#### 4. äº¤äº’ä¼˜åŒ–

- **å±•å¼€/æ”¶ç¼©åŠ¨ç”»**ï¼šå¹³æ»‘è¿‡æ¸¡
- **æ‹–æ‹½æ‰‹æŸ„é«˜äº®**ï¼šæ‹–åŠ¨æ—¶æ˜¾ç¤ºæ©™è‰²é«˜äº®ï¼ˆ`bg-orange-500`ï¼‰
- **AI å¯¹è¯å…¥å£**ï¼šé˜…è¯»æ–‡ç« æ—¶ï¼Œå³ä¸‹è§’æ˜¾ç¤ºæ‚¬æµ®æŒ‰é’®å‘¼å‡º AI å¯¹è¯
- **å“åº”å¼è®¾è®¡**ï¼šé˜…è¯»è¯¦æƒ…åŒºè‡ªé€‚åº”å‰©ä½™ç©ºé—´ï¼ˆ`flex-1`ï¼‰

---

## AI åŠŸèƒ½è¯¦è§£

### 1. æ™ºèƒ½æ‘˜è¦

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- è‡ªåŠ¨ä¸ºæ–°è·å–çš„æ–‡ç« ç”Ÿæˆä¸­æ–‡æ‘˜è¦
- æ‘˜è¦é•¿åº¦æ§åˆ¶åœ¨ 150 å­—ä»¥å†…
- ç¼“å­˜åˆ° IndexedDB é¿å…é‡å¤è°ƒç”¨

**å®ç°**ï¼š
```typescript
// æ›´æ–°æ–‡ç«  AI æ‘˜è¦
async updateAISummary(articleId: string, summary: string): Promise<void> {
  await db.articles.update(articleId, {
    aiSummary: summary,
    summaryGeneratedAt: Date.now(),
  })
}
```

**ç”Ÿæˆæ—¶æœº**ï¼š
- åˆ·æ–°è®¢é˜…æºåï¼Œå¼‚æ­¥ä¸ºæ–°æ–‡ç« ç”Ÿæˆæ‘˜è¦
- ç”¨æˆ·å¯é€‰æ‹©ä¸åŒæ¨¡å‹é‡æ–°ç”Ÿæˆ

### 2. AI å¯¹è¯

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- åŸºäºå½“å‰é˜…è¯»çš„æ–‡ç« å†…å®¹è¿›è¡Œå¤šè½®å¯¹è¯
- **å¢å¼ºäº¤äº’**ï¼š
  - æ”¯æŒ**ç¼–è¾‘**ç”¨æˆ·æé—®å¹¶é‡æ–°ç”Ÿæˆ
  - æ”¯æŒ**æ’¤é”€**ä¸Šä¸€è½®å¯¹è¯
  - æ”¯æŒ**åˆ é™¤**å•æ¡æ¶ˆæ¯
  - æ”¯æŒ**åœæ­¢**ç”Ÿæˆ
  - æ”¯æŒ**é‡è¯•**å¤±è´¥çš„å›å¤
- **ä¼šè¯ç®¡ç†**ï¼š
  - ä¼šè¯è‡ªåŠ¨ä¿å­˜ï¼ˆ24å°æ—¶è¿‡æœŸï¼‰
  - æ”¯æŒ**æ”¶è—**ä¼šè¯ï¼ˆæ°¸ä¹…ä¿å­˜ï¼‰
  - æ˜¾ç¤ºå½“å‰ä¸Šä¸‹æ–‡ï¼ˆæ–‡ç« æ ‡é¢˜åŠå­—æ•°ï¼‰
- æ”¯æŒæµå¼å“åº”ï¼ˆé€å­—æ˜¾ç¤ºï¼‰
- å¯¹è¯å†å²ç®¡ç†
- å¯è‡ªç”±åˆ‡æ¢ AI æ¨¡å‹

**UI è®¾è®¡**ï¼š
- ä¾§è¾¹æ å½¢å¼ï¼ˆç¬¬å››æ ï¼‰
- æ¶ˆæ¯æ°”æ³¡æ ·å¼ï¼ˆç”¨æˆ·/AI åŒºåˆ†ï¼‰
- å®æ—¶ Markdown æ¸²æŸ“
- åŠ è½½çŠ¶æ€æ˜¾ç¤º

**å…³é”®ç‰¹æ€§**ï¼š
```typescript
// AI ä¼šè¯»å–å½“å‰æ–‡ç« ä½œä¸ºä¸Šä¸‹æ–‡
const systemPrompt = `ä½ æ­£åœ¨ä¸ç”¨æˆ·è®¨è®ºä»¥ä¸‹æ–‡ç« ï¼š

æ ‡é¢˜ï¼š${articleTitle}

å†…å®¹ï¼š${articleContent}

è¯·åŸºäºæ–‡ç« å†…å®¹å›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚`
```

### 3. AI ç­›é€‰

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- åŸºäºè‡ªç„¶è¯­è¨€è§„åˆ™ç­›é€‰æ–‡ç« 
- è®¢é˜…æºçº§åˆ«é…ç½®ç­›é€‰è§„åˆ™
- æ‰¹é‡ç­›é€‰ä¼˜åŒ–æ€§èƒ½

**å·¥ä½œæµç¨‹**ï¼š
1. ç”¨æˆ·ä¸ºè®¢é˜…æºé…ç½®ç­›é€‰è§„åˆ™ï¼ˆå¦‚ï¼š"åªä¿ç•™ä¸ AI ç›¸å…³çš„å†…å®¹"ï¼‰
2. åˆ·æ–°è®¢é˜…æºæ—¶ï¼Œæ‰¹é‡è°ƒç”¨ AI åˆ¤æ–­æ–‡ç« æ˜¯å¦ç¬¦åˆè§„åˆ™
3. åªå±•ç¤ºç¬¦åˆè§„åˆ™çš„æ–‡ç« 

**æ€§èƒ½ä¼˜åŒ–**ï¼š
- æ‰¹é‡è°ƒç”¨ AIï¼ˆä¸€æ¬¡å¤„ç†å¤šç¯‡æ–‡ç« ï¼‰
- åŸºäºæ ‡é¢˜åˆ¤æ–­ï¼ˆä¸éœ€è¦å…¨æ–‡ï¼‰
- ç»“æœç¼“å­˜

### 4. ç”¨æˆ·è‡ªå®šä¹‰é…ç½®

**é…ç½®é¡¹**ï¼š
- API Base URL
- API Key
- é»˜è®¤æ¨¡å‹

**é…ç½®ç•Œé¢**ï¼š
- AI è®¾ç½®å¼¹çª—ï¼ˆAISettings ç»„ä»¶ï¼‰
- è¡¨å•éªŒè¯
- é‡ç½®ä¸ºé»˜è®¤é…ç½®

**é…ç½®å­˜å‚¨**ï¼š
- localStorageï¼ˆ`folo_ai_config`ï¼‰
- ä¼˜å…ˆçº§ï¼šç”¨æˆ·è®¾ç½® > ç¯å¢ƒå˜é‡ > é»˜è®¤å€¼

---

## é¢„è®¾è®¢é˜…æº

åº”ç”¨å†…ç½®ä¸°å¯Œçš„é¢„è®¾è®¢é˜…æºï¼ˆ`config/presetFeeds.ts`ï¼‰ï¼Œæ¶µç›– 8 å¤§åˆ†ç±»ï¼š

### åˆ†ç±»ä½“ç³»

| åˆ†ç±» | è®¢é˜…æºæ•°é‡ | ç¤ºä¾‹ |
|------|-----------|------|
| ğŸ¤– AI å‰æ²¿ | 5 | Hacker Newsã€MIT ç§‘æŠ€è¯„è®ºã€DeepMind Blogã€AI Weeklyã€AIGC Weekly |
| ğŸ“± ç§‘æŠ€èµ„è®¯ | 5 | å°‘æ•°æ´¾ã€é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—ã€Solidotã€æ˜é‡‘å‰ç«¯ã€V2EX |
| âš½ è¶³çƒèµ„è®¯ | 2 | æ‡‚çƒå¸ã€è™æ‰‘è¶³çƒ |
| ğŸ’° è´¢ç»ç»æµ | 2 | è´¢æ–°ç½‘ã€ç¬¬ä¸€è´¢ç» |
| ğŸ§  å¿ƒç†å­¦ | 2 | å£¹å¿ƒç†ã€å¿ƒç†å­¦ç©ºé—´ |
| ğŸ“š ä¹¦ç±æ¨è | 2 | è±†ç“£è¯»ä¹¦ã€ç†æƒ³å›½å›¾ä¹¦ |
| ğŸ”“ å¼€æºé¡¹ç›® | 2 | GitHub Trendingã€HelloGitHub |
| ğŸ“° ç»¼åˆæ–°é—» | 2 | çŸ¥ä¹çƒ­æ¦œã€36æ°ªå¿«è®¯ |

### ä¸€é”®åŠ è½½æœºåˆ¶

```typescript
// ç”¨æˆ·å¯ä¸€é”®åŠ è½½æ‰€æœ‰é¢„è®¾è®¢é˜…æº
async function handleLoadPresets() {
  for (const preset of PRESET_FEEDS) {
    await dbHelpers.addFeed({
      title: preset.title,
      url: preset.url,
      category: preset.category,
      description: preset.description,
      aiFilter: preset.aiFilter,
    })
  }
}
```

### AI ç­›é€‰è§„åˆ™ç¤ºä¾‹

éƒ¨åˆ†è®¢é˜…æºé¢„é…ç½®äº† AI ç­›é€‰è§„åˆ™ï¼š

```typescript
{
  url: 'https://hnrss.org/frontpage',
  title: 'Hacker News',
  category: 'AI å‰æ²¿',
  aiFilter: 'åªä¿ç•™ä¸ AIã€æœºå™¨å­¦ä¹ ã€LLMã€GPTã€æ·±åº¦å­¦ä¹ ã€OpenAIã€Anthropicã€Google AI ç›¸å…³çš„å†…å®¹',
}
```

---

## ç›®å½•ç»“æ„

```
folo-rebuild/
â”œâ”€â”€ doc/                    # æ–‡æ¡£
â”‚   â”œâ”€â”€ requirement.md     # éœ€æ±‚æ–‡æ¡£
â”‚   â””â”€â”€ spec.md            # æŠ€æœ¯è§„èŒƒï¼ˆæœ¬æ–‡æ¡£ï¼‰
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.tsx           # å…¥å£
â”‚   â”œâ”€â”€ App.tsx            # ä¸»ç»„ä»¶ï¼ˆå››æ å¸ƒå±€ï¼‰
â”‚   â”œâ”€â”€ components/        # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx           # ä¾§è¾¹æ ï¼ˆè®¢é˜…æºåˆ—è¡¨ã€åˆ†ç±»ç®¡ç†ï¼‰
â”‚   â”‚   â”œâ”€â”€ FeedList.tsx          # æ–‡ç« åˆ—è¡¨ï¼ˆAI æ‘˜è¦å¡ç‰‡ï¼‰
â”‚   â”‚   â”œâ”€â”€ ArticleView.tsx       # æ–‡ç« è¯¦æƒ…ï¼ˆé˜…è¯»è§†å›¾ï¼‰
â”‚   â”‚   â”œâ”€â”€ AIChat.tsx            # AI å¯¹è¯ä¾§è¾¹æ 
â”‚   â”‚   â”œâ”€â”€ AISettings.tsx        # AI è®¾ç½®å¼¹çª—
â”‚   â”‚   â””â”€â”€ ResizablePanel.tsx    # å¯è°ƒæ•´å¤§å°çš„é¢æ¿
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ presetFeeds.ts  # é¢„è®¾è®¢é˜…æºé…ç½®
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â””â”€â”€ index.ts        # IndexedDB æ•°æ®åº“ï¼ˆDexie.jsï¼‰
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ ai.ts           # AI æœåŠ¡ï¼ˆæ‘˜è¦/å¯¹è¯/ç­›é€‰ï¼‰
â”‚   â”‚   â””â”€â”€ rss.ts          # RSS è§£ææœåŠ¡ï¼ˆåŸç”Ÿ DOMParserï¼‰
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â””â”€â”€ feedStore.ts    # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts        # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ index.css           # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ vite-env.d.ts
â”œâ”€â”€ .env.example           # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ package.json
â”œâ”€â”€ tailwind.config.js     # TailwindCSS é…ç½®
â”œâ”€â”€ postcss.config.js      # PostCSS é…ç½®
â”œâ”€â”€ tsconfig.json          # TypeScript é…ç½®
â””â”€â”€ vite.config.ts         # Vite é…ç½®
```

---

## æ•°æ®åº“è®¾è®¡

ä½¿ç”¨ Dexie.jsï¼ˆIndexedDB å°è£…ï¼‰å­˜å‚¨æ•°æ®ï¼š

```typescript
class FoloDatabase extends Dexie {
  feeds: Table<Feed>
  articles: Table<Article>
  starredArticles: Table<StarredArticle>
  settings: Table<{ key: string; value: unknown }>

  constructor() {
    super('folo-minimal')
    
    this.version(3).stores({
      // è®¢é˜…æºè¡¨ï¼šurl ä¸ºå”¯ä¸€ç´¢å¼•
      feeds: 'id, title, category, &url, createdAt',
      
      // æ–‡ç« è¡¨ï¼šæ”¯æŒæŒ‰è®¢é˜…æºã€æ—¶é—´ã€é˜…è¯»çŠ¶æ€æŸ¥è¯¢
      articles: 'id, feedId, pubDate, isRead, isStarred',
      
      // æ”¶è—æ–‡ç« è¡¨ï¼ˆåŒ…å«åŸæ–‡ï¼‰
      starredArticles: 'id, feedId, starredAt',
      
      // è®¾ç½®è¡¨
      settings: 'key',
    })
  }
}
```

**è¡¨ç»“æ„**ï¼š

| è¡¨å | è¯´æ˜ | ç´¢å¼• |
|------|------|------|
| `feeds` | è®¢é˜…æº | id, title, category, &urlï¼ˆå”¯ä¸€ï¼‰, createdAt |
| `articles` | æ–‡ç« å…ƒæ•°æ® | id, feedId, pubDate, isRead, isStarred |
| `starredArticles` | æ”¶è—çš„æ–‡ç« ï¼ˆå«åŸæ–‡ï¼‰ | id, feedId, starredAt |
| `settings` | åº”ç”¨è®¾ç½® | key |

---

## UI ç»„ä»¶è¯´æ˜

### 1. App.tsx - ä¸»åº”ç”¨ç»„ä»¶

**èŒè´£**ï¼š
- ç®¡ç†å››æ å¸ƒå±€
- å¤„ç†é¢æ¿å±•å¼€/æ”¶ç¼©
- å¤„ç†é¢æ¿å®½åº¦è°ƒæ•´
- å¸ƒå±€çŠ¶æ€æŒä¹…åŒ–

**çŠ¶æ€ç®¡ç†**ï¼š
```typescript
const [layout, setLayout] = useState({
  sidebar: { expanded: true, width: 240 },
  feedList: { expanded: true, width: 380 },
  aiChat: { expanded: false, width: 360 },
})
```

### 2. Sidebar.tsx - è®¢é˜…æºåˆ—è¡¨

**åŠŸèƒ½**ï¼š
- è®¢é˜…æºåˆ†ç±»å±•ç¤º
- æ·»åŠ /åˆ é™¤è®¢é˜…æº
- åˆ·æ–°è®¢é˜…æº
- ä¸€é”®åŠ è½½é¢„è®¾è®¢é˜…æº
- åˆ†ç±»æŠ˜å ç®¡ç†
- AI è®¾ç½®å…¥å£

**äº¤äº’**ï¼š
- ç‚¹å‡»è®¢é˜…æºåˆ‡æ¢æ˜¾ç¤ºçš„æ–‡ç« åˆ—è¡¨
- æ”¯æŒå±•å¼€/æ”¶ç¼©

### 3. FeedList.tsx - æ–‡ç« åˆ—è¡¨

**åŠŸèƒ½**ï¼š
- æ˜¾ç¤ºå½“å‰è®¢é˜…æºçš„æ–‡ç« åˆ—è¡¨
- å±•ç¤º AI æ‘˜è¦å¡ç‰‡
- æ ‡è®°å·²è¯»/æœªè¯»
- æ”¶è—æ–‡ç« 

**å¡ç‰‡è®¾è®¡**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“° æ–‡ç« æ ‡é¢˜              2å°æ—¶å‰   â”‚
â”‚  AI: è¿™ç¯‡æ–‡ç« ä¸»è¦è®²è¿°äº†...          â”‚
â”‚  [æ ‡è®°å·²è¯»] [æ”¶è—]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. ArticleView.tsx - æ–‡ç« è¯¦æƒ…

**åŠŸèƒ½**ï¼š
- å®æ—¶è·å–å¹¶æ¸²æŸ“æ–‡ç« å…¨æ–‡
- è‡ªåŠ¨æ ‡è®°å·²è¯»
- æ”¶è—/å–æ¶ˆæ”¶è—
- ç¿»è¯‘åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰

**æ¸²æŸ“æ–¹å¼**ï¼š
- ä½¿ç”¨ `dangerouslySetInnerHTML` æ¸²æŸ“ HTML
- æ ·å¼ä¼˜åŒ–ï¼ˆæ–‡ç« å†…å®¹åŒºåŸŸï¼‰

### 5. AIChat.tsx - AI å¯¹è¯

**åŠŸèƒ½**ï¼š
- åŸºäºå½“å‰æ–‡ç« çš„ AI å¯¹è¯
- æµå¼å“åº”æ˜¾ç¤º
- å¯¹è¯å†å²ç®¡ç†
- æ¨¡å‹é€‰æ‹©
- æ¸…ç©ºå¯¹è¯

**UI ç‰¹ç‚¹**ï¼š
- æ¶ˆæ¯æ°”æ³¡æ ·å¼
- ç”¨æˆ·æ¶ˆæ¯å³å¯¹é½ï¼ŒAI æ¶ˆæ¯å·¦å¯¹é½
- Markdown æ¸²æŸ“ï¼ˆä»£ç é«˜äº®ç­‰ï¼‰
- åŠ è½½åŠ¨ç”»

### 6. AISettings.tsx - AI é…ç½®

**åŠŸèƒ½**ï¼š
- é…ç½® API Base URL
- é…ç½® API Key
- éªŒè¯é…ç½®
- é‡ç½®ä¸ºé»˜è®¤å€¼

**è¡¨å•éªŒè¯**ï¼š
- URL æ ¼å¼éªŒè¯
- API Key éç©ºéªŒè¯

### 7. ResizablePanel.tsx - å¯è°ƒæ•´é¢æ¿

**åŠŸèƒ½**ï¼š
- æ‹–æ‹½è°ƒæ•´å®½åº¦
- å®½åº¦é™åˆ¶ï¼ˆmin/maxï¼‰
- æ‹–åŠ¨æ—¶é«˜äº®
- å·¦/å³æ‹–æ‹½æ‰‹æŸ„

**å®ç°è¦ç‚¹**ï¼š
- ç›‘å¬ `mousedown`ã€`mousemove`ã€`mouseup` äº‹ä»¶
- è®¡ç®—å¹¶é™åˆ¶å®½åº¦èŒƒå›´
- é€šè¿‡å›è°ƒé€šçŸ¥çˆ¶ç»„ä»¶

---

## ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | æ˜¯å¦å¿…éœ€ |
|--------|------|----------|
| `VITE_SILICONFLOW_API_KEY` | SiliconFlow API Key | å¯é€‰ï¼ˆå¯åœ¨åº”ç”¨å†…é…ç½®ï¼‰ |

**é…ç½®æ–¹å¼**ï¼š

1. **ç¯å¢ƒå˜é‡**ï¼ˆ`.env` æ–‡ä»¶ï¼‰ï¼š
```bash
VITE_SILICONFLOW_API_KEY=your_api_key_here
```

2. **åº”ç”¨å†…é…ç½®**ï¼ˆæ¨èï¼‰ï¼š
   - ç‚¹å‡»ä¾§è¾¹æ çš„ âš™ï¸ è®¾ç½®å›¾æ ‡
   - åœ¨ AI è®¾ç½®å¼¹çª—ä¸­å¡«å†™é…ç½®
   - ä¿å­˜åˆ° localStorage

**ä¼˜å…ˆçº§**ï¼šåº”ç”¨å†…é…ç½® > ç¯å¢ƒå˜é‡ > é»˜è®¤å€¼

---

## è·å– API Key

1. è®¿é—® https://siliconflow.cn
2. æ³¨å†Œè´¦å·å¹¶ç™»å½•
3. åœ¨æ§åˆ¶å°åˆ›å»º API Key
4. å¡«å…¥ `.env` æ–‡ä»¶æˆ–åœ¨åº”ç”¨å†… **AI è®¾ç½®** ä¸­é…ç½®

---

## å¼€å‘æŒ‡å—

### å¯åŠ¨é¡¹ç›®

```bash
# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
pnpm build
```

### ç±»å‹æ£€æŸ¥

```bash
pnpm type-check
```

---

## æŠ€æœ¯äº®ç‚¹

1. **çº¯å‰ç«¯å®ç°**ï¼šæ— éœ€åç«¯æœåŠ¡å™¨ï¼Œæ•°æ®å­˜å‚¨åœ¨æµè§ˆå™¨ IndexedDB
2. **åŸç”Ÿ RSS è§£æ**ï¼šä½¿ç”¨ DOMParser æ›¿ä»£ rss-parserï¼Œé¿å… Node.js ä¾èµ–
3. **å¤šä»£ç†è½®è¯¢**ï¼šRSS è·å–å¤±è´¥æ—¶è‡ªåŠ¨å°è¯•å¤šä¸ª CORS ä»£ç†
4. **AI åŠŸèƒ½ä¸°å¯Œ**ï¼šæ‘˜è¦ã€å¯¹è¯ã€ç­›é€‰ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›
5. **çµæ´»å¸ƒå±€**ï¼šå››æ å¯è°ƒæ•´å¸ƒå±€ï¼Œæ²‰æµ¸å¼é˜…è¯»ä½“éªŒ
6. **ç”¨æˆ·å‹å¥½**ï¼šé¢„è®¾è®¢é˜…æºã€ä¸€é”®åŠ è½½ã€AI é…ç½®ç•Œé¢
7. **æ€§èƒ½ä¼˜åŒ–**ï¼šæ‘˜è¦ç¼“å­˜ã€æ‰¹é‡ç­›é€‰ã€è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¯æ‰©å±•ï¼‰

---

## License

MIT
